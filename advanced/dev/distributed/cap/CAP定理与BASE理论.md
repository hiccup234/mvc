
## 什么是CAP定理？

   * 2000年7月，加州大学伯克利分校的Eric Brewer教授在ACM PODC会议上提出CAP猜想。
   
   * 2年后麻省理工学院的Seth Gilbert和NancyLynch从理论上证明了CAP，之后CAP理论正式成为分布式计算领域的公认定理。

### 一致性（C） 
    All nodes see the same data at the same time
    
    所有数据库集群节点在同一时间点看到的数据完全一致，即所有节点能实时保持数据同步 
    
    与RDBMS的ACID中的C不一样，彼C是说单库中同一事务执行先后，数据库的状态应该是从一个一致性状态转换到另一个一致性状态，
    而此C说的是不同节点间同一时刻的数据应该是完全同步的。

### 可用性（A） 
    Reads and writes always succeed
    
    读写操作永远是成功的。即服务一直是可用的，即使集群一部分节点故障，集群整体还能正常响应客户端的读写请求。

### 分区容错性（P） 
    The system continues to operate despite arbitrary message loss or failure of part of the system
    
    尽管系统中有任意的信息丢失或故障，系统仍在继续运行。以实际效果而言，分区相当于对通信的时限要求。
    系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。



### 保留CA，放弃P（RDBMS）
    如果想避免分区容错性问题的发生，一种做法是将所有的数据（与事务相关的）都放在一台机器上。
    虽然无法100%保证系统不会出错，但不会碰到由分区带来的负面效果，当然这个选择会严重的影响系统的扩展性。
    
    作为一个分布式系统，放弃P，相当于放弃了分布式，一旦并发性很高，单机服务根本不能承受压力。
    （像很多银行服务，确确实实就是舍弃了P，只用单台小型机+Oracle保证服务可用性）

### 保留CP，放弃A（Redis集群,MongoDB,HBase）
    相对于放弃“分区容错性“来说，其反面就是放弃可用性。一旦遇到分区容错故障，那么受到影响的服务需要等待一定的时间，因此在等待期间系统无法对外提供服务。
    作为分布式系统，分区服务发生问题很有可能，如果因为某些服务不能用，导致整个服务都不能用，这个根本不是好的分布式系统，所以自然而然放弃了A。

### 保留AP，舍弃C（目前比较少见，CouchDB）
    这里所说的放弃一致性，并不是完全放弃数据一致性，而是放弃数据的强一致性。即放弃了同一时刻的数据一致性，而保留数据的最终一致性。
    以网络购物为例，对只剩下一件库存的商品，如果同时接受到了两份订单，那么较晚的订单将被告知商品告罄。
    
    通常情况下，很多分布式服务系统都是采用该方案，保证可用性，因为某些分区服务发生问题，先容忍，最终通过一些折中的方法达到最终数据一致性。


## 什么是BASE理论？

   * BASE是Basically Available（基本可用）、Soft state（软状态）和Eventually consistent（最终一致性）三个短语的简写。
   
   * BASE是对CAP中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的结论（由于硬件和网络的不可靠原因，分区容错性必须要满足），
     是基于CAP定理逐步演化而来的，其核心思想是即使无法做到强一致性（Strong consistency），但每个应用都可以根据自身的业务特点，
     采用适当的方式来使系统达到最终一致性（Eventual consistency）。

 
 
 
 
 
 